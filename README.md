# üéôÔ∏è AI Content Engine

### Transforme podcasts e v√≠deos do YouTube em conte√∫do para 6 redes sociais automaticamente

[![AI CODE PRO](https://img.shields.io/badge/AI%20CODE%20PRO-Project%2002-blueviolet?style=for-the-badge)](https://cienciadosdados.com)
[![Next.js](https://img.shields.io/badge/Next.js-16-black?style=for-the-badge&logo=next.js)](https://nextjs.org)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--5-teal?style=for-the-badge&logo=openai)](https://openai.com)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-blue?style=for-the-badge&logo=typescript)](https://typescriptlang.org)

[![Convex](https://img.shields.io/badge/Convex-Database-orange?style=flat-square)](https://convex.dev)
[![Clerk](https://img.shields.io/badge/Clerk-Auth-blue?style=flat-square)](https://clerk.com)
[![Inngest](https://img.shields.io/badge/Inngest-Workflows-purple?style=flat-square)](https://inngest.com)
[![AssemblyAI](https://img.shields.io/badge/AssemblyAI-Transcription-green?style=flat-square)](https://assemblyai.com)
[![YouTube](https://img.shields.io/badge/YouTube-Transcript-red?style=flat-square&logo=youtube)](https://youtube.com)

---

> **üéØ Project 02** do programa **[AI CODE PRO](https://cienciadosdados.com)** da Ci√™ncia dos Dados

## üöÄ Pare de Gastar Horas Extraindo Informa√ß√µes de Podcasts - Deixe a IA Fazer!

Fa√ßa upload do seu podcast **ou cole um link do YouTube**. Receba conte√∫do otimizado para 6 redes sociais automaticamente.

---

### üìå Para Quem √â Este Projeto

**Criadores de podcast afogados em trabalho de p√≥s-produ√ß√£o**

Voc√™ passou horas gravando, editando e produzindo seu podcast. Agora precisa:
- Escrever posts para 6 plataformas diferentes
- Criar t√≠tulos e descri√ß√µes atraentes
- Gerar timestamps para YouTube
- Encontrar os melhores momentos para clips
- Escrever legendas e hashtags

**Este app faz tudo isso em segundos.**

### üéØ Diferencial Principal

**Workflow completo de IA do upload ao conte√∫do multi-plataforma**

N√£o √© apenas transcri√ß√£o. N√£o √© apenas resumos. √â um sistema completo de distribui√ß√£o de conte√∫do alimentado por IA que entende seu podcast e cria conte√∫do personalizado para cada plataforma.

### ‚ö° Destaque T√©cnico

**Processamento paralelo de IA com Inngest (5x mais r√°pido que sequencial)**

Em vez de esperar 5 minutos para tarefas de IA rodarem uma por uma, executamos 6 jobs de gera√ß√£o simultaneamente. Seu conte√∫do fica pronto em ~90 segundos.

---

## ü§î O Que √â Este App?

Pense nele como **sua reda√ß√£o de IA para conte√∫do de podcast**.

Explica√ß√£o simples:

1. **Voc√™ faz upload** de um arquivo de √°udio (seu epis√≥dio de podcast) **ou cola um link do YouTube**
2. **A IA analisa** seu conte√∫do, entendendo speakers, t√≥picos e momentos-chave
3. **Voc√™ recebe** um pacote completo de distribui√ß√£o:
   - Resumo com insights principais
   - Posts para Twitter, LinkedIn, Instagram, TikTok, YouTube e Facebook
   - Sugest√µes de t√≠tulos (curtos, longos, otimizados para SEO)
   - Hashtags espec√≠ficas por plataforma
   - Timestamps de cap√≠tulos para YouTube
   - Momentos-chave para clips virais
   - Transcri√ß√£o completa com identifica√ß√£o de speakers

**O workflow:** Gravar ‚Üí Upload (ou YouTube) ‚Üí IA Analisa ‚Üí Receber Conte√∫do

Sem escrita manual. Sem copiar e colar entre plataformas. Sem adivinhar quais hashtags funcionam.

---

## üéì Sobre o AI CODE PRO

Este projeto faz parte do programa **AI CODE PRO** da [Ci√™ncia dos Dados](https://cienciadosdados.com), onde constru√≠mos aplica√ß√µes completas utilizando IA e as tecnologias mais modernas do mercado.

### üí° O Que Voc√™ Aprende

- **Next.js 16** - Server actions, app router, API routes e streaming
- **Bancos Real-time** - Convex para atualiza√ß√µes instant√¢neas sem polling
- **Integra√ß√µes de IA** - OpenAI, AssemblyAI e prompt engineering
- **Background Jobs** - Inngest para workflows dur√°veis e observ√°veis
- **Auth & Billing Modernos** - Clerk com gest√£o de assinaturas
- **Deploy em Produ√ß√£o** - Vercel, vari√°veis de ambiente e monitoramento

### üìÖ Projetos do AI CODE PRO

- **Project 01**: Fundamentos e setup inicial
- **Project 02**: AI Content Engine (este projeto)
- **Project 03+**: Projetos avan√ßados

### üëâ [Saiba mais em cienciadosdados.com](https://cienciadosdados.com)

---

## ‚ú® Features

### Para Criadores de Podcast

- **üé¨ Suporte a YouTube** - Cole um link do YouTube e extraia transcri√ß√£o automaticamente (sem precisar de √°udio!)
- **üìù Resumo com IA** - Vis√£o geral completa com bullets, insights principais e TL;DR
- **üì± Posts para Redes Sociais** - Conte√∫do otimizado para 6 plataformas:
  - **Twitter** - 280 caracteres, direto e engajador
  - **LinkedIn** - Tom profissional, thought leadership
  - **Instagram** - Ganchos visuais com perguntas de engajamento
  - **TikTok** - Casual, trend-aware, Gen-Z friendly
  - **YouTube** - Descri√ß√£o com CTAs e timestamps
  - **Facebook** - Focado em comunidade, iniciadores de conversa
- **üéØ Sugest√µes de T√≠tulos** - 4 estilos diferentes para cada uso:
  - YouTube Curto (chamativo, menos de 60 chars)
  - YouTube Longo (descritivo, SEO-friendly)
  - T√≠tulos de Podcast (focado no epis√≥dio)
  - Keywords SEO (descobribilidade)
- **#Ô∏è‚É£ Hashtags** - Tags espec√≠ficas por plataforma otimizadas para alcance
- **‚è±Ô∏è Timestamps YouTube** - Marcadores de cap√≠tulo gerados automaticamente
- **üé§ Momentos-Chave** - IA identifica oportunidades de clips virais com timestamps
- **üë• Diariza√ß√£o de Speakers** - "Quem disse o qu√™" com labels e scores de confian√ßa

### Features T√©cnicas

- **‚ö° Processamento Paralelo** - 6 jobs de IA rodam simultaneamente (60s total vs 300s sequencial)
- **üîÑ Atualiza√ß√µes Real-time** - Veja progresso ao vivo com Convex subscriptions (sem polling)
- **üõ°Ô∏è Workflows Dur√°veis** - Inngest faz retry autom√°tico de steps falhos (sem perda de trabalho)
- **üìä Feature Gating por Plano** - Features desbloqueiam baseado no tier (Free/Pro/Ultra)
- **üé® Suporte Dark Mode** - UI bonita que adapta √† sua prefer√™ncia
- **üì¶ Type-safe End-to-End** - TypeScript completo com valida√ß√£o Zod
- **üîê Seguro por Padr√£o** - Autentica√ß√£o Clerk com seguran√ßa row-level

---

## üí∞ Planos de Pre√ßos

| Feature | FREE | PRO ($29/m√™s) | ULTRA ($69/m√™s) |
|---------|:----:|:------------:|:--------------:|
| **Projetos** | 3 lifetime | 30/m√™s | Ilimitado |
| **Tamanho Arquivo** | 10 MB | 200 MB | 3 GB |
| **Dura√ß√£o M√°xima** | 10 min | 2 horas | Ilimitado |
| **Resumo IA** | ‚úì | ‚úì | ‚úì |
| **Posts Sociais** | ‚úó | ‚úì | ‚úì |
| **T√≠tulos & Hashtags** | ‚úó | ‚úì | ‚úì |
| **Timestamps YouTube** | ‚úó | ‚úó | ‚úì |
| **Momentos-Chave** | ‚úó | ‚úó | ‚úì |
| **Transcri√ß√£o Completa** | ‚úó | ‚úó | ‚úì |
| **Diariza√ß√£o de Speakers** | ‚úó | ‚úó | ‚úì |

---

## üîß Como Funciona

### Arquitetura de Processamento LLM

Este projeto usa **LLM Features** (n√£o agentes). Cada fun√ß√£o faz uma chamada √∫nica ao GPT-5-mini com prompt especializado e retorna dados estruturados.

```mermaid
flowchart TB
    subgraph Input["üì• Entrada"]
        TRANSCRIPT[Transcri√ß√£o do Podcast<br/>YouTube ou AssemblyAI]
    end

    subgraph Orchestrator["‚öôÔ∏è Orquestrador Inngest"]
        PROCESSOR[podcast-processor.ts<br/>Promise.allSettled]
    end

    subgraph LLMFeatures["ü§ñ LLM Features - GPT-5-mini"]
        direction TB
        
        subgraph Free["üÜì Plano Free"]
            SUMMARY[summary.ts<br/>Resumo Completo]
        end
        
        subgraph Pro["‚≠ê Plano Pro"]
            SOCIAL[social-posts.ts<br/>Posts 6 Redes]
            TITLES[titles.ts<br/>Sugest√µes de T√≠tulos]
            HASHTAGS[hashtags.ts<br/>Hashtags por Plataforma]
        end
        
        subgraph Ultra["üëë Plano Ultra"]
            MOMENTS[key-moments.ts<br/>Momentos Virais]
            TIMESTAMPS[youtube-timestamps.ts<br/>Cap√≠tulos YouTube]
        end
    end

    subgraph Output["üíæ Sa√≠da"]
        CONVEX[(Convex Database)]
        UI[Dashboard Real-time]
    end

    TRANSCRIPT --> PROCESSOR
    
    PROCESSOR --> SUMMARY
    PROCESSOR --> SOCIAL
    PROCESSOR --> TITLES
    PROCESSOR --> HASHTAGS
    PROCESSOR --> MOMENTS
    PROCESSOR --> TIMESTAMPS
    
    SUMMARY --> CONVEX
    SOCIAL --> CONVEX
    TITLES --> CONVEX
    HASHTAGS --> CONVEX
    MOMENTS --> CONVEX
    TIMESTAMPS --> CONVEX
    
    CONVEX --> UI

    style Free fill:#10b981,stroke:#059669,color:#fff
    style Pro fill:#3b82f6,stroke:#2563eb,color:#fff
    style Ultra fill:#8b5cf6,stroke:#7c3aed,color:#fff
```

### Detalhes de Cada LLM Feature

```mermaid
flowchart LR
    subgraph summary["üìù summary.ts"]
        S_IN[Transcri√ß√£o + Cap√≠tulos] --> S_PROMPT[System: Especialista em resumos<br/>User: Texto + contexto]
        S_PROMPT --> S_LLM[GPT-5-mini<br/>zodResponseFormat]
        S_LLM --> S_OUT[full, bullets, insights, tldr]
    end

    subgraph social["üì± social-posts.ts"]
        SO_IN[Transcri√ß√£o] --> SO_PROMPT[System: Social media expert<br/>User: Conte√∫do + plataformas]
        SO_PROMPT --> SO_LLM[GPT-5-mini<br/>zodResponseFormat]
        SO_LLM --> SO_OUT[twitter, linkedin, instagram<br/>tiktok, youtube, facebook]
    end

    subgraph titles["üéØ titles.ts"]
        T_IN[Transcri√ß√£o] --> T_PROMPT[System: Copywriter expert<br/>User: Conte√∫do + estilos]
        T_PROMPT --> T_LLM[GPT-5-mini<br/>zodResponseFormat]
        T_LLM --> T_OUT[youtube_short, youtube_long<br/>podcast, seo_keywords]
    end

    subgraph hashtags["#Ô∏è‚É£ hashtags.ts"]
        H_IN[Transcri√ß√£o + T√≥picos] --> H_PROMPT[System: Growth expert<br/>User: T√≥picos + plataformas]
        H_PROMPT --> H_LLM[GPT-5-mini<br/>zodResponseFormat]
        H_LLM --> H_OUT[twitter, linkedin, instagram<br/>tiktok, youtube]
    end

    subgraph moments["‚ö° key-moments.ts"]
        M_IN[Transcri√ß√£o + Timestamps] --> M_PROMPT[System: Video editor<br/>User: Conte√∫do + timing]
        M_PROMPT --> M_LLM[GPT-5-mini<br/>zodResponseFormat]
        M_LLM --> M_OUT[timestamp, title, description<br/>viral_potential]
    end

    subgraph timestamps["‚è±Ô∏è youtube-timestamps.ts"]
        YT_IN[Transcri√ß√£o + Cap√≠tulos] --> YT_PROMPT[System: YouTube expert<br/>User: Cap√≠tulos + timing]
        YT_PROMPT --> YT_LLM[GPT-5-mini<br/>zodResponseFormat]
        YT_LLM --> YT_OUT[time, title, description]
    end
```

### Por que LLM Features e n√£o Agentes?

| Aspecto | LLM Feature (usado aqui) | Agente |
|---------|--------------------------|--------|
| **Chamadas** | 1 chamada por feature | M√∫ltiplas chamadas iterativas |
| **Decis√µes** | Nenhuma - prompt fixo | Decide pr√≥ximos passos |
| **Ferramentas** | N√£o usa | Usa ferramentas externas |
| **Custo** | Baixo e previs√≠vel | Alto e vari√°vel |
| **Lat√™ncia** | ~5-10s por feature | Minutos |
| **Controle** | Total - output estruturado | Menos previs√≠vel |

**Vantagem**: Execu√ß√£o paralela de 6 features em ~60 segundos total.

### Stack de Tecnologias

```mermaid
flowchart TB
    subgraph Frontend["üñ•Ô∏è Frontend"]
        NEXTJS[Next.js 16<br/>App Router + Server Actions]
        REACT[React 19<br/>Components + Hooks]
        TAILWIND[Tailwind CSS<br/>Styling + Dark Theme]
    end

    subgraph Auth["üîê Autentica√ß√£o"]
        CLERK[Clerk<br/>Auth + Billing + Plans]
    end

    subgraph Database["üíæ Banco de Dados"]
        CONVEX[Convex<br/>Real-time Database]
        BLOB[Vercel Blob<br/>File Storage]
    end

    subgraph Orchestration["‚öôÔ∏è Orquestra√ß√£o"]
        INNGEST[Inngest<br/>Durable Workflows]
    end

    subgraph AI["ü§ñ Intelig√™ncia Artificial"]
        OPENAI[OpenAI GPT-5<br/>Content Generation]
        ASSEMBLYAI[AssemblyAI<br/>Audio Transcription]
    end

    subgraph YouTube["üé¨ YouTube"]
        PYTHON[Python Service<br/>Flask + youtube-transcript-api]
    end

    subgraph Deploy["üöÄ Deploy"]
        VERCEL[Vercel<br/>Hosting + Edge]
    end

    %% Conex√µes
    NEXTJS --> CLERK
    NEXTJS --> CONVEX
    NEXTJS --> BLOB
    NEXTJS --> INNGEST
    NEXTJS --> PYTHON

    CLERK --> |"JWT Token"| NEXTJS
    CONVEX --> |"Real-time Updates"| REACT

    INNGEST --> ASSEMBLYAI
    INNGEST --> OPENAI
    INNGEST --> CONVEX

    PYTHON --> |"Transcript"| INNGEST

    NEXTJS --> VERCEL

    style Frontend fill:#1e293b,stroke:#10b981,color:#fff
    style Auth fill:#1e293b,stroke:#3b82f6,color:#fff
    style Database fill:#1e293b,stroke:#f97316,color:#fff
    style Orchestration fill:#1e293b,stroke:#a855f7,color:#fff
    style AI fill:#1e293b,stroke:#14b8a6,color:#fff
    style YouTube fill:#1e293b,stroke:#ef4444,color:#fff
    style Deploy fill:#1e293b,stroke:#6366f1,color:#fff
```

### Fluxo de Dados Entre Servi√ßos

```mermaid
sequenceDiagram
    participant U as üë§ Usu√°rio
    participant N as Next.js
    participant C as Clerk
    participant B as Vercel Blob
    participant P as Python Service
    participant I as Inngest
    participant A as AssemblyAI
    participant O as OpenAI
    participant D as Convex

    U->>N: Upload √°udio ou YouTube URL
    N->>C: Verifica autentica√ß√£o
    C-->>N: ‚úÖ Autorizado

    alt Upload de √Åudio
        N->>B: Salva arquivo
        B-->>N: URL do arquivo
        N->>I: Evento podcast/uploaded
        I->>A: Transcreve √°udio
        A-->>I: Transcri√ß√£o
    else Link do YouTube
        N->>P: Extrai transcri√ß√£o
        P-->>N: Transcri√ß√£o + metadata
        N->>I: Evento podcast/uploaded (com transcript)
        Note over I: Pula AssemblyAI
    end

    par Gera√ß√£o Paralela
        I->>O: Gera Resumo
        I->>O: Gera Posts Sociais
        I->>O: Gera T√≠tulos
        I->>O: Gera Hashtags
    end

    O-->>I: Conte√∫do gerado
    I->>D: Salva resultados
    D-->>U: üîÑ Atualiza√ß√£o real-time
```

### Fluxo do Usu√°rio

```mermaid
flowchart TD
    A[Usu√°rio faz Upload do √Åudio ou Cola Link YouTube] --> B{Tipo de Input}
    B -->|√Åudio| C[Arquivo salvo no Vercel Blob]
    B -->|YouTube| D[Python Service extrai transcri√ß√£o]
    C --> E[Evento Inngest Disparado]
    D --> E
    E --> F[Status: Processando]
    F -->|√Åudio| G[Transcri√ß√£o AssemblyAI]
    F -->|YouTube| H[Usa transcri√ß√£o j√° extra√≠da]
    G --> I[Gera√ß√£o de Conte√∫do IA Paralela]
    H --> I
    I --> J[Resultados Salvos no Convex]
    J --> K[Status: Completo]
    K --> L[Usu√°rio Visualiza Dashboard]
    L --> M[Atualiza√ß√µes Real-time via Convex]
```

**Notas de Performance:**
- Transcri√ß√£o (√Åudio): ~30-60 segundos via AssemblyAI
- Transcri√ß√£o (YouTube): ~2-5 segundos (extra√ß√£o direta)
- Gera√ß√£o de Conte√∫do IA (paralela): ~60 segundos
- **Tempo Total de Processamento: ~90-120 segundos (√°udio) ou ~60-70 segundos (YouTube)**

---

### Arquitetura de Processamento Paralelo

```mermaid
flowchart TD
    A[Transcri√ß√£o AssemblyAI Completa] --> B{Fan-out para Jobs Paralelos}
    B --> C[Gerar Resumo]
    B --> D[Gerar Posts Sociais]
    B --> E[Gerar T√≠tulos]
    B --> F[Gerar Hashtags]
    B --> G[Gerar Timestamps YouTube]
    B --> H[Gerar Momentos-Chave]
    C --> I[Juntar Todos Resultados]
    D --> I
    E --> I
    F --> I
    G --> I
    H --> I
    I --> J[Salvar no Convex Database]
    J --> K[UI Atualiza em Real-time]
```

**Por Que Isso Importa:**
- **Sequencial**: 6 jobs √ó 50s cada = ~300 segundos (5 minutos)
- **Paralelo**: Todos jobs rodam simultaneamente = ~60 segundos
- **Resultado**: 5x mais r√°pido

---

### Arquitetura de Dados

```mermaid
flowchart LR
    A[Upload Cliente] --> B[Next.js API Route]
    B --> C[Clerk Auth Check]
    C --> D[Vercel Blob Storage]
    D --> E[Evento Inngest]
    E --> F[Transcri√ß√£o AssemblyAI]
    E --> G[Gera√ß√£o Conte√∫do OpenAI]
    F --> H[Convex Database]
    G --> H
    H --> I[Subscription Real-time]
    I --> J[Atualiza√ß√£o Dashboard]
```

---

## üöÄ Come√ßando

### Pr√©-requisitos

Antes de come√ßar, certifique-se de ter:

- **Node.js 18+** e **pnpm** instalados
- Contas criadas para todos os servi√ßos (veja se√ß√£o de Configura√ß√£o abaixo)
- **Git** para controle de vers√£o
- Um editor de c√≥digo (VS Code recomendado)

### Passos de Instala√ß√£o

1. **Clone o reposit√≥rio**

```bash
git clone https://github.com/cienciadosdados/podcast.git
cd podcast
```

2. **Instale as depend√™ncias**

```bash
pnpm install
```

3. **Configure as vari√°veis de ambiente**

```bash
cp .env.example .env.local
```

Preencha todas as chaves necess√°rias no `.env.local` (veja se√ß√£o Vari√°veis de Ambiente abaixo).

4. **Inicie os servi√ßos de desenvolvimento** (3 terminais)

**Terminal 1 - Servi√ßo Python (YouTube):**
```bash
cd python-service
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac
pip install flask youtube-transcript-api requests flask-cors
python app.py
```

**Terminal 2 - Next.js + Convex:**
```bash
pnpm dev
```

**Terminal 3 - Inngest Dev Server:**
```bash
npx inngest-cli@latest dev
```

5. **Abra seu navegador**

Navegue para `http://localhost:3000`

**URLs dos servi√ßos:**
- App: http://localhost:3000
- Python Service: http://localhost:5000
- Inngest Dashboard: http://localhost:8288

---

### Vari√°veis de Ambiente

Crie um arquivo `.env.local` na raiz do projeto com as seguintes vari√°veis:

```bash
# Convex
CONVEX_DEPLOYMENT=dev:ai-podcast-saas-inngest-coderabbit-clerk
NEXT_PUBLIC_CONVEX_URL=https://your-project.convex.cloud

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
CLERK_JWT_ISSUER_DOMAIN=your-domain.clerk.accounts.dev

# Vercel Blob
BLOB_READ_WRITE_TOKEN=vercel_blob_...

# Assembly AI
ASSEMBLYAI_API_KEY=...

# OpenAI
OPENAI_API_KEY=sk-proj-...

# Inngest
INNGEST_EVENT_KEY=...
INNGEST_SIGNING_KEY=signkey-prod-...

# YouTube Service (opcional - para desenvolvimento local)
YOUTUBE_SERVICE_URL=http://localhost:5000
```

**Notas de Seguran√ßa:**

- ‚ö†Ô∏è **NUNCA fa√ßa commit do `.env.local`** no controle de vers√£o
- ‚úÖ Use `.env.example` como template (seguro para commit)
- üîë Vari√°veis com prefixo `NEXT_PUBLIC_` s√£o expostas ao browser
- üîí Outras vari√°veis s√£o apenas server-side

---

### Configura√ß√£o dos Servi√ßos

#### 1. Clerk (Autentica√ß√£o & Billing)

1. Acesse [Clerk Dashboard](https://clerk.com)
2. Crie uma nova aplica√ß√£o
3. Copie suas chaves publishable e secret para `.env.local`
4. **Habilite Billing**:
   - V√° em "Billing" ‚Üí "Subscriptions"
   - Crie tr√™s planos: `free`, `pro`, `ultra`
   - Defina pre√ßos: Free ($0), Pro ($29/m√™s), Ultra ($69/m√™s)
5. **Configure Features** (use estes identificadores):
   - `summary` (Free, Pro, Ultra)
   - `social_posts` (Pro, Ultra)
   - `titles` (Pro, Ultra)
   - `hashtags` (Pro, Ultra)
   - `youtube_timestamps` (Ultra only)
   - `key_moments` (Ultra only)
   - `speaker_diarization` (Ultra only)

#### 2. Convex (Banco Real-time)

1. Acesse [Convex Dashboard](https://convex.dev)
2. Crie um novo projeto
3. Copie a URL de deployment para `.env.local`
4. O schema ser√° auto-deployed quando rodar `pnpm convex dev`

#### 3. Vercel Blob (Storage de Arquivos)

1. Acesse [Vercel Dashboard](https://vercel.com)
2. Crie um novo projeto (ou use existente)
3. V√° em "Storage" ‚Üí "Create Database" ‚Üí "Blob"
4. Copie o `BLOB_READ_WRITE_TOKEN` para `.env.local`

#### 4. Inngest (Orquestra√ß√£o de Workflows)

1. Acesse [Inngest Dashboard](https://inngest.com)
2. Crie um novo app
3. Copie Event Key e Signing Key para `.env.local`
4. **IMPORTANTE**: Use o dom√≠nio de **Settings ‚Üí Domains** do Vercel (n√£o URLs de deployment)
5. Em desenvolvimento, Inngest auto-descobre suas fun√ß√µes

#### 5. AssemblyAI (Transcri√ß√£o)

1. Acesse [AssemblyAI Dashboard](https://www.assemblyai.com/dashboard)
2. Crie uma conta (tier gratuito dispon√≠vel)
3. Copie sua API key para `.env.local`
4. **Pre√ßo**: ~$0.00025/segundo (~$0.65 por hora de √°udio)

#### 6. OpenAI (Gera√ß√£o de Conte√∫do IA)

1. Acesse [OpenAI Platform](https://platform.openai.com)
2. Crie uma API key
3. Adicione cr√©ditos √† sua conta (pay-as-you-go)
4. Copie sua API key para `.env.local`
5. **Modelo Usado**: GPT-5-mini (~$0.05 por epis√≥dio de podcast)

#### 7. Python Service (YouTube - Desenvolvimento Local)

O servi√ßo Python √© necess√°rio apenas para desenvolvimento local da feature de YouTube.

1. Instale Python 3.8+
2. Navegue para `python-service/`
3. Crie um ambiente virtual e instale depend√™ncias:
```bash
python -m venv venv
venv\Scripts\activate  # Windows
pip install flask youtube-transcript-api requests flask-cors
```
4. Execute: `python app.py`
5. O servi√ßo estar√° dispon√≠vel em `http://localhost:5000`

**Nota**: Para produ√ß√£o, o servi√ßo Python precisa ser hospedado separadamente (Railway, Render, etc.)

---

### Checklist Primeira Configura√ß√£o

Antes de fazer upload do primeiro podcast, verifique:

- [ ] Todas vari√°veis de ambiente configuradas no `.env.local`
- [ ] Servi√ßo Python rodando (`python app.py` na pasta `python-service/`)
- [ ] Next.js + Convex rodando (`pnpm dev`)
- [ ] Inngest Dev Server rodando (`npx inngest-cli@latest dev`)
- [ ] Aplica√ß√£o Clerk configurada com planos de billing
- [ ] Voc√™ consegue acessar o app em `http://localhost:3000`
- [ ] Teste upload com arquivo pequeno (menos de 10MB) ou link do YouTube

---

## üìä Vis√£o Geral do Schema

### Modelo Principal: Tabela `projects`

Toda a aplica√ß√£o gira em torno de uma √∫nica tabela `projects` no Convex. Esta estrutura denormalizada permite atualiza√ß√µes at√¥micas e reatividade em tempo real.

**Campos Principais:**

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `userId` | string | Clerk user ID (vincula projeto ao usu√°rio) |
| `inputUrl` | string | URL Vercel Blob do arquivo uploaded |
| `status` | enum | `uploaded` ‚Üí `processing` ‚Üí `completed` ou `failed` |
| `jobStatus` | object | Status granular para `transcription` e `contentGeneration` |
| `transcript` | object | Transcri√ß√£o completa com segmentos, speakers, cap√≠tulos |
| `summary` | object | Resumo gerado por IA com bullets, insights, TLDR |
| `socialPosts` | object | Posts espec√≠ficos por plataforma (Twitter, LinkedIn, etc.) |
| `titles` | object | Sugest√µes de t√≠tulos (YouTube, podcast, SEO) |
| `hashtags` | object | Recomenda√ß√µes de hashtags por plataforma |
| `youtubeTimestamps` | array | Marcadores de cap√≠tulo para descri√ß√µes YouTube |
| `keyMoments` | array | Oportunidades de clips virais com timestamps |

**Decis√µes de Design:**

- **Estrutura denormalizada** - Todos dados em um documento para atualiza√ß√µes at√¥micas
- **Campos opcionais** - Permitem popula√ß√£o progressiva conforme jobs Inngest completam
- **Indexes** - Otimizam queries por usu√°rio, status e data de cria√ß√£o
- **Reatividade real-time** - Subscriptions Convex disparam atualiza√ß√µes de UI automaticamente

**Indexes:**

- `by_user` - Lista todos projetos de um usu√°rio
- `by_status` - Filtra por status de processamento
- `by_user_and_status` - Projetos ativos/completos do usu√°rio
- `by_created_at` - Ordena por mais recente

---

## üöÄ Deploy

### Deploy na Vercel (Recomendado)

1. **Push seu c√≥digo para GitHub**

```bash
git add .
git commit -m "Initial commit"
git push origin main
```

2. **Importe para Vercel**

- Acesse [Vercel Dashboard](https://vercel.com)
- Clique "Import Project"
- Selecione seu reposit√≥rio GitHub
- Vercel auto-detecta Next.js

3. **Adicione vari√°veis de ambiente**

No dashboard Vercel ‚Üí Settings ‚Üí Environment Variables, adicione todas vari√°veis do seu `.env.local`

4. **Deploy**

Vercel faz deploy automaticamente a cada push para `main`

5. **Configure dom√≠nio customizado** (opcional)

Settings ‚Üí Domains ‚Üí Adicione seu dom√≠nio

---

### Deploy via CLI

```bash
npx vercel --prod
```

Siga os prompts para fazer deploy.

---

### Checklist P√≥s-Deploy

Ap√≥s fazer deploy em produ√ß√£o:

- [ ] Todas vari√°veis de ambiente configuradas no dashboard Vercel
- [ ] Ambiente de produ√ß√£o do Inngest configurado (separado do dev)
- [ ] Inst√¢ncia de produ√ß√£o do Clerk conectada
- [ ] Atualizar `NEXT_PUBLIC_APP_URL` para sua URL de produ√ß√£o
- [ ] Testar upload em produ√ß√£o com arquivo pequeno
- [ ] Monitorar dashboard Inngest para erros de workflow
- [ ] Verificar logs Vercel para erros de runtime

---

### Monitoramento & Observabilidade

Fique de olho nestes dashboards:

- **Inngest Dashboard** - Logs de execu√ß√£o, tentativas de retry, falhas
- **Convex Dashboard** - Queries de banco, m√©tricas de performance, conex√µes real-time
- **Vercel Analytics** - Tr√°fego, page views, performance de edge functions
- **Clerk Dashboard** - Signups de usu√°rios, assinaturas ativas, eventos de billing

---

## üêõ Problemas Comuns & Solu√ß√µes

### Problemas de Desenvolvimento

#### Erro: Convex n√£o conecta

**Problema:** N√£o consegue conectar ao banco Convex

**Solu√ß√£o:**
```bash
# Certifique-se que o Convex dev server est√° rodando em terminal separado
pnpm convex dev
```

#### Erro: Upload de arquivo falha

**Problema:** Upload retorna erro 400 ou 500

**Solu√ß√£o:**
- Verifique se Vercel Blob est√° habilitado nas configura√ß√µes do projeto
- Confirme que `BLOB_READ_WRITE_TOKEN` est√° correto
- Verifique console do browser para erros de CORS

#### Erro: Inngest n√£o dispara

**Problema:** Arquivo faz upload mas processamento nunca inicia

**Solu√ß√£o:**
- Verifique `INNGEST_EVENT_KEY` e `INNGEST_SIGNING_KEY` no `.env.local`
- Confirme que Inngest dev server est√° conectado (veja logs no terminal)
- Certifique-se que rota `/api/inngest` est√° acess√≠vel
- **IMPORTANTE**: Use o dom√≠nio de **Settings ‚Üí Domains** do Vercel (n√£o URLs de deployment)

---

### Problemas de Banco de Dados

#### Projetos n√£o aparecem

**Problema:** Usu√°rio faz upload mas n√£o v√™ no dashboard

**Solu√ß√£o:**
- Verifique se Clerk `userId` corresponde ao `userId` do projeto no banco
- Confirme que Convex provider envolve seu app em `app/layout.tsx`
- Verifique console do browser para erros de conex√£o Convex

#### Atualiza√ß√µes real-time n√£o funcionam

**Problema:** Dashboard n√£o atualiza automaticamente durante processamento

**Solu√ß√£o:**
- Certifique-se que `ConvexProvider` envolve seu app
- Confirme que est√° usando `useQuery` (n√£o `fetchQuery`) para dados reativos
- Verifique dashboard Convex para problemas de conex√£o

---

### Problemas de Autentica√ß√£o

#### Loops de redirect Clerk

**Problema:** Preso em redirect infinito ap√≥s sign in

**Solu√ß√£o:**
- Verifique se `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` est√° correto
- Confira URLs de redirect corretas no dashboard Clerk
- Limpe cookies do browser e tente novamente

#### Billing n√£o funciona

**Problema:** Usu√°rios n√£o conseguem fazer upgrade ou limites n√£o s√£o aplicados

**Solu√ß√£o:**
- Configure planos no dashboard Clerk com identificadores corretos: `free`, `pro`, `ultra`
- Certifique-se que identificadores de features correspondem ao `tier-config.ts`
- Verifique configura√ß√£o de webhook Clerk para eventos de subscription

---

### Problemas de Processamento

#### Gera√ß√£o IA travada

**Problema:** Projeto travado em status "processing"

**Solu√ß√£o:**
- Verifique dashboard Inngest para logs de erro
- Confirme que `OPENAI_API_KEY` √© v√°lida e tem cr√©ditos
- Verifique p√°gina de status da API OpenAI para outages

#### Transcri√ß√£o falha

**Problema:** Step de transcri√ß√£o falha imediatamente

**Solu√ß√£o:**
- Verifique se `ASSEMBLYAI_API_KEY` √© v√°lida
- Confirme que formato do arquivo √© suportado (MP3, MP4, WAV, etc.)
- Certifique-se que URL do arquivo √© publicamente acess√≠vel
- Verifique dashboard AssemblyAI para limites de quota

#### Features de plano n√£o aplicam

**Problema:** Usu√°rios free veem features Pro/Ultra

**Solu√ß√£o:**
- Verifique se configura√ß√£o de planos Clerk corresponde ao `tier-config.ts`
- Confira l√≥gica de detec√ß√£o de plano em `lib/tier-utils.ts`
- Certifique-se que fun√ß√£o `has` √© chamada corretamente nas API routes

---

## üèÜ Pr√≥ximos Passos - Desafios!

Quer evoluir este projeto? Aqui est√£o algumas features avan√ßadas que voc√™ pode construir:

### Features Avan√ßadas

- **üìÑ Exportar para PDF/Google Doc** - Gerar relat√≥rios PDF bonitos com todo conte√∫do
- **üìÖ Agendamento de Redes Sociais** - Integra√ß√£o com Buffer ou Hootsuite para auto-posting
- **üåç Suporte Multi-idioma** - Transcrever e traduzir para 10+ idiomas
- **üé® Presets de Tom de IA** - Permitir usu√°rios definir voz da marca para gera√ß√£o IA
- **üì¶ Processamento em Lote** - Upload de 10 epis√≥dios, processar todos durante a noite
- **üé• Gera√ß√£o de Video Clips** - Criar automaticamente video clips dos momentos-chave
- **üìä Dashboard de Analytics** - Rastrear qual conte√∫do performa melhor em cada plataforma

### Melhorias de IA

- **üß† Fine-tuning** - Treinar GPT no estilo espec√≠fico do podcast do usu√°rio
- **üí¨ Prompts Customizados** - Permitir usu√°rios escreverem seus pr√≥prios templates por plataforma
- **üòä An√°lise de Sentimento** - Tagar automaticamente momentos como engra√ßados, insightful, controversos
- **A/B Testing** - Gerar m√∫ltiplas varia√ß√µes de t√≠tulo e rastrear qual performa melhor
- **üîç Recomenda√ß√µes de Conte√∫do** - "Baseado neste epis√≥dio, voc√™ deveria falar sobre..."

### Infraestrutura & Escala

- **‚òÅÔ∏è Cloudflare R2** - Migrar do Vercel Blob para storage mais barato a longo prazo
- **‚ö° Redis Caching** - Cache de projetos e transcri√ß√µes frequentemente acessados
- **ü™ù Notifica√ß√µes Webhook** - Alertar usu√°rios via email/SMS quando processamento completa
- **üîß Worker Service Separado** - Mover processamento pesado para infraestrutura dedicada
- **üìä Analytics de Uso** - Rastrear custos por usu√°rio para otimiza√ß√£o de pricing

### Features de Monetiza√ß√£o

- **üë• Planos de Time** - Acesso multi-usu√°rio com permiss√µes baseadas em roles
- **üè∑Ô∏è Op√ß√£o White-label** - Permitir ag√™ncias rebrandar o app para seus clientes
- **üîå Acesso API** - Tier enterprise com REST API para automa√ß√£o
- **üí≥ Sistema de Cr√©ditos** - Modelo pay-per-use ao inv√©s de assinaturas
- **üéÅ Programa de Referral** - Recompensar usu√°rios por trazer novos clientes

**Escolha uma feature e construa!** Depois compartilhe no programa AI CODE PRO da Ci√™ncia dos Dados.

---

## üìÑ Licen√ßa

Este projeto √© licenciado sob a **Creative Commons Attribution-NonCommercial 4.0 International License (CC BY-NC 4.0)**.

### Voc√™ PODE:

- ‚úÖ Usar este c√≥digo para **aprendizado pessoal** e educa√ß√£o
- ‚úÖ Modificar e adaptar o c√≥digo para seus pr√≥prios projetos
- ‚úÖ Compartilhar o c√≥digo com outros (com atribui√ß√£o)
- ‚úÖ Usar em seu **portf√≥lio** (showcase n√£o-comercial)
- ‚úÖ Fork, clone e experimentar com o codebase

### Voc√™ N√ÉO PODE:

- ‚ùå Usar este c√≥digo para **prop√≥sitos comerciais** (venda, SaaS, trabalho para clientes)
- ‚ùå Vender esta aplica√ß√£o ou derivados dela
- ‚ùå Remover atribui√ß√£o ao autor original
- ‚ùå Relicenciar o c√≥digo sob termos diferentes

### Para Licenciamento Comercial

Interessado em usar este projeto comercialmente? Entre em contato:

- **Licen√ßa Startup** - Para empresas em est√°gio inicial
- **Licen√ßa Enterprise** - Para empresas estabelecidas
- **Licen√ßa White-label** - Direitos completos de customiza√ß√£o para ag√™ncias

**Contato:** Abra uma issue no GitHub ou entre em contato via [cienciadosdados.com](https://cienciadosdados.com)

Texto completo da licen√ßa: [LICENSE.md](./LICENSE.md)

---

## üìö Refer√™ncia R√°pida

### Comandos √öteis

```bash
# Desenvolvimento
pnpm dev          # Inicia Next.js dev server + Convex watch
pnpm build        # Build para produ√ß√£o
pnpm start        # Inicia servidor de produ√ß√£o
pnpm lint         # Roda Biome linter
pnpm format       # Formata c√≥digo com Biome

# Convex
pnpm convex dev   # Inicia banco Convex de desenvolvimento
pnpm convex deploy # Deploy Convex para produ√ß√£o

# Deployment
npx vercel        # Deploy para Vercel (preview)
npx vercel --prod # Deploy para produ√ß√£o
```

---

### Conceitos Importantes

**Feature Gating por Plano**

Features s√£o habilitadas baseado no tier de assinatura Clerk do usu√°rio:
- **Free**: Apenas Summary (3 projetos lifetime)
- **Pro**: + Social posts, titles, hashtags (30 projetos/m√™s)
- **Ultra**: + YouTube timestamps, key moments, full transcript (ilimitado)

**Processamento Paralelo de IA**

Em vez de rodar tarefas de gera√ß√£o IA sequencialmente (lento), Inngest roda 6 jobs em paralelo usando `Promise.allSettled`. Isso reduz tempo de processamento de ~5 minutos para ~60 segundos.

**Atualiza√ß√µes Real-time**

Subscriptions Convex (`useQuery`) re-renderizam componentes automaticamente quando dados do banco mudam. Sem polling, sem refetch manual. Conforme Inngest atualiza status do projeto, UI atualiza instantaneamente.

**Execu√ß√£o Dur√°vel**

Inngest prov√™ l√≥gica de retry autom√°tico. Se OpenAI der timeout ou AssemblyAI falhar, o step faz retry com backoff exponencial. Seus usu√°rios nunca perdem trabalho.

---

## üôè Agradecimentos

Constru√≠do com ferramentas incr√≠veis de:
- [Clerk](https://clerk.com) - Autentica√ß√£o & Billing
- [Inngest](https://inngest.com) - Orquestra√ß√£o de Workflows
- [Convex](https://convex.dev) - Banco Real-time
- [Vercel](https://vercel.com) - Deploy & Storage
- [AssemblyAI](https://www.assemblyai.com) - Intelig√™ncia de √Åudio
- [OpenAI](https://platform.openai.com) - Gera√ß√£o de Conte√∫do IA

---

## üí¨ D√∫vidas ou Problemas?

- **Encontrou um bug?** Abra uma issue no GitHub
- **Precisa de ajuda?** Entre em contato via [cienciadosdados.com](https://cienciadosdados.com)
- **Quer contribuir?** PRs s√£o bem-vindos (veja LICENSE para termos)

---

**Constru√≠do com ‚ù§Ô∏è para a comunidade Ci√™ncia dos Dados - AI CODE PRO Project 02**
